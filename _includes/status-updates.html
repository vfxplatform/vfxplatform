{% comment %}
  Status updates include
  Usage: {% include status-updates.html limit=5 %}
  Or: {% include status-updates.html offset=5 %}
  Card style: {% include status-updates.html limit=4 style="cards" %}
{% endcomment %}

{% assign updates = site.data.status_updates.updates %}

{% if include.limit %}
  {% assign updates = updates | slice: 0, include.limit %}
{% endif %}

{% if include.offset %}
  {% assign updates = updates | slice: include.offset, updates.size %}
{% endif %}

{% if include.style == "cards" %}
<div class="space-y-4">
  {% for update in updates %}
  <div class="border border-gray-200 dark:border-gray-700 rounded-lg p-5 bg-white dark:bg-gray-800/50">
    <div class="flex items-center gap-3 mb-2">
      {% if forloop.first %}
      <span class="inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-600 text-white">
        Latest
      </span>
      {% endif %}
      <span class="flex items-center gap-1.5 text-blue-600 dark:text-blue-400 text-sm">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
          <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"/>
        </svg>
        {{ update.display_date }}
      </span>
    </div>
    <p class="text-gray-600 dark:text-gray-300 text-sm leading-relaxed">
      {{ update.content | markdownify | remove: '<p>' | remove: '</p>' | strip }}
    </p>
  </div>
  {% endfor %}
</div>
{% else %}
<div class="space-y-5 text-gray-600 dark:text-gray-300">
  {% for update in updates %}
  <p>
    <strong>{{ update.display_date }}</strong> - {{ update.content | markdownify | remove: '<p>' | remove: '</p>' | strip }}
  </p>
  {% endfor %}
</div>
{% endif %}
